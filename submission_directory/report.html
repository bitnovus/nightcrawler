<html>
<title>Project Nightcrawler Report</title>
<h1>Project Nightcrawler Report</h1>

<p> This project was quite a journey for all of the group members.  Most of use knew little about any of the languages or applications used in this project before the beginning of this class, so we definitely learned a lot this semester. Given the amount of time that we had to develop the site and our novice standing come into the project, our project worked out extremely well. We met all of our goals and milestones from our original proposal, even with all of the speed bumps that we encountered along the way. We chose a rather challenging project (not one that used a lot of previously written open-source or Princeton-available code) which allowed us to take the project in a multitude of directions. </p>

<p><b> Milestones</b><br>
From our original design document, our milestone were<br>
<ul>
	<li> Create a unified data format for travel resources (This ended up being our dictionary entries used by the backend to return results from all of the various travel service providers)</li>
	<li> Implement functions to access buses: Bolt Bus, Megabus, and Suburban </li>
	<li> Implement functions to access trains: NJ Transit, MTA, and Amtrak</li>
	<li> Implement functions to access more buses: Lucky Star</li>
	<li> Create search functionality</li>
	<li> Implement customer-facing interface </li>
	<li> Launch Alpha</li>
	<li> Launch Beta</li>
</ul>
All in all, we did a good job of accomplishing our milestones established at the beginning of the project. We ended up using Orbitz instead of SkyScanner to access flight information since SkyScanner recenlty got rid of their API.  Also, due to the lack of available APIs and the time-consuming nature of scraping each travel site individually, we were not able to include as many bus and train services as we had originally hoped.  We still accomplished the incorporation of th main bus and train services: Megabus, Amtrak, and NJ Transit and got a website up and running. The results returned on our site capitalize on the fact that we have aggregated information from multiple flight, train, and bus travel services. We were even able to add a map feature to show a visual depiction of the returned results. So in a sense, we exceeded our milestones. 
</p>

<p><b> Design and Interface Experience</b><br> As a group, we had very little design experience coming into the project. We used CSS to style our site and learned a lot in the process. We chosed to keep our website relatively simplistic and neat looking to make it easier for users. Our users come to our sites for the specific purpose of finding cheaper, faster, smarter travel so we tried to eliminate all superfluous links, images, buttons, etc. to make the experience of using our website as easy as possible. We designed a logo. </p>

<p><b> Testing</b><br> Due to wide variety of journeys generated and displayed on our results page, testing represented one of the most challenging aspects of this process. Due to the many components of our site, there were always new bugs to find.  Most of our hard-to-find bugs stemmed from the fact that we were scraping from multiple travel service providers, and trying to return results for and display on the map, not only results from all of the individual travel providers (which each have their own unique challenges), but all combination routes. We had to make sure to thorough test every possible combination to make sure that we were not missing any bugs. A lot of these bugs had to be found through trial and error for various routes on various web browsers to make sure that:
<ol>
	<li> The results returned that used single travel providers were accurate</li>
	<li> The results using multiple travel providers we reasonable and allow for transfer time </li>
	<li> The results were sorted appropriately </li>
	<li> The links to purchase tickets directs users to the appropriate page </li>
	<li> The map to display the route is accurate (not returning an origin or destination in India for instance)</li>
</ol>
 For instance, we had subtle bugs related to all of the following specific issues:
<ul>
	<li> NJ Transit routes with two or more required transfers </li>
	<li> Displaying maps for Megabus routes for which the bus station name is not unique (and hence the map routes us to an undesired location) </li>
	<li> Needing to us different methodologies to get the links working for all the travel providers </li>
</ul>
 Through testing we realized that some of the original assumptions that we made about specific travels services did not hold, and we had to go back and alter our code accordingly.  For instance, we had originally assumed that all of the results returned by New Jersey Transit for specific date, origin, and destination would contain the same number of trip legs. This turned out not to be the case, as we discovered through testing, and we then modified the Python scrapring script according so that its functionality does not rely on this assumption. We also distributed the url for our site to our friends, particulary those that live in the northeast. This was helpful because sometimes they would find a bug that affects a city that they were particularly interested in that we had not fully tested yet. Much of our testing was done by simply sanity checking the results. For a given query, we read the returned results and make sure they are all logical. If a specific result looked questionable, we would then compare the results returned on our site to the result displayed on the website of the travel service itself (such as Amtrak).  We made sure that if a user entered something incorrect on one of the fields on our site, our site does not break, but instead a meaningul error message is returned. We also made sure our site was not susceptible to mySql injection attacks. Since we never make any calls to the database of the form "SELECT * FROM" we didn't really have to worry about mySql injection attacks. </p>

<p><b> Suprises</b><br> We were suprised by the amount of scraping that was necessary for this project due to the lack of APIs available from the travel services.  New Jersey Transit has an API which we ended up not using since scraping ended up being simpler. SkyScanner, which returns flight information, recently got rid of its API, as did Kayak, making the data collecting component of our project more challenging and time consuming that we had originally expected. We were also suprised at the amount of work it took to get the map display working. Since there is a Google Maps API, we originally thought it would be simple.  It ended up being complex because there were many different types of input that had to be passed in (airport code, train stations, and street adresses for some of the bus stations) and we had to be able to map routes with multiple legs (like a mutlistop trip). We displayed flight routes in a lighter blue color than the other mode of transportation so that they could be distinguished. </p>

<p><b> Good Choices</b><br> One good choice we made was using PGAdmin3 to manage our PostgresSQL database. PDAdmin3 allowed us to visualize and edit our database using a similar setup as is available in Microsoft excel. Easy manipulation of the database saved us time. When after some effort, we were unable to get Beautiful Soup to work for us, we made made a good choice in deciding to move on and try a different approach. We used post and get requests along with regular expressions to scrape from the travel services. While this scraping approach has better performance becuase each scraping python function is site-specific, our code is not necessarily the easiest to understand or modify due to the fact that we parsed the html for regular expressions to extract the needed travel information. Using Heroku was a good choice. Using heroku made deploying very simple and quick with only a push request. Using git was extremely helpful.  If a group member introduced a bug, we could just use git to roll back to get back a working version. Using Jquery allowed us to easily and quickly add widgets to our website.  </p>

<p><b> Bad Choices</b><br> One bad choice we made was to spend so long trying to get BeautifulSoup, a python module to scrape websites, working before eventually deciding that scraping using regular expressions was a valid and easier alternatives. One group member had trouble with her python directories which resulted in the module being downloaded for the older version of Python, even after multiple attempts and debugging the issue. She even installed a virtual machine on her machine to try to get around this seemigly simple issue. Ironically another group member, whose versions of Python were better organized, had no trouble using BeautifulSoup on the first try.  </p>

<p><b> Future Directions</b><br> In the future we would like to include results from more travel service providers on our site. This will allow us to return more journey options to our users (both direct routes and combinations generated by our algorithm). We would like to include travel results from Bolt Bus as it is Megabus's most direct competitor in providing bus travel for the northeast. Bolt Bus and Megabus are the main two bus companies still remaining that serve the northeast as many others were shut down for violating safety regulations following a string of deadly bus accidents in March 2013. We would also like to include on our site travel provided by MTA North, a train company that provides local service traveling north from New York City and into Connecticut.</p>
<p> In addition to adding more travel providers to our site, we would also like to work on speeding up and improving our algorithm for returning journey results. While using our website is much faster than entering your desired result and destination in all of the possible travel providers, it still takes tens of seconds for our results page to load. We are using multi-threading to speed up the process of generating results, but we would like to work on making this process even faster. We also have other ideas that we have yet to implement to make our algorithm more sophisticated. For instance, one of our group members, through personal experience realized that sometime a cheaper flight can be attained by booking a reservation that has a layover in your desired destination and simply not traveling on the last leg of the trip. Hacks like this can be incorporated to return the cheapest travel results for our users. </p>
<p> We also would like to include functionality on our site to compare the cost of driving from the desired origin to destination to the other results returned on the page. Driving cost can be computed based on gas prices and distance traveled. This functionality is not something we were able to find on other sites, so it would be unqiue to our site.  Right now our site only returns results for one-way travel with the idea that if a user desires the return trip as well, doing another query on our site is straightforward. We could add functionality for finding round-trip journeys relatively easily in the future. </p>

<p><b> What we would do differently</b><br> If we could start this project over again today, we would definitely start earlier and do a better job really researching our idea before jumping into it. This would have saved us from some of the suprises that we encountered down the road. We also would have gotten testing environments and access to the database for all group members set up earlier so that we could all do a more thorough job with the testing. </p>

<p><b> What we learned</b><br> We learned about many languages, tools, and development environments, many of which we had never heard of before the start of the course. We used python a lot than any of us previously had. Some group members also had never had an database experience before this project. We also had no experience with JQuery or Twitter Bootstrap. Many of these specific tools had a learning curve, but now that we know how to use them, making a new web service would be faster and more intuitive for us. We learned the value of open source tools that are availble through Twitter Bootstrap and JQuery (such as the calendar and autocomplete menu). It was really interesting how quickly some functionality was added to our site by just plugging in these features while other components of our site which probably seem much more trivial to users took us so much more time. We also learned a lot about working in a group setting. It can sometimes be challenging to find times when everyone is free especially given that some of us are early morning risers while others are night owls.  Not all group members knew each other well at the beginning of the semester, so we made some great new friends by working together! </p>

</html>